# 带宽与延迟

## 网络延迟
产生延迟的四种因素：

![](http://7xsi10.com1.z0.glb.clouddn.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-12-12%20%E4%B8%8B%E5%8D%887.36.29.png)

分别对应：
* **处理延迟:** 处理分组首部、检查位错误及确定分组目标所需的时间
* **队列延迟:** 到来的分组排队等待处理的时间
* **发送延迟:** 把消息中的所有比特转移到链路中需要的时间，是消息长度和链路速率的函数
* **传输延迟:** 消息从发送端到接收端需要的时间，是信号传播距离和速度的函数

---
每个分组在通过网络时都会遇到这样或那样的延迟。发送端与接收端的距离越远， 传播时间就越长。一路上经过的路由器越多，每个分组的处理和传输延迟就越多。 最后，网络流量越拥挤，分组在入站缓冲区中被延迟的可能性就越大。

## 传输速率
传输速率取决于传播的媒介，传输媒介多种多样，常用的传输介质有：双绞线、同轴电缆、光纤、无线传输媒介等。

### 与光速对比
光速与分组在介质中传播速度之比，叫做该介质的折射率。这个值越大，光在该介质中传播的速度就越慢。

`光纤`通过波分复用(WDM，Wavelength-Division Multiplexing)技术，可以同时传输很多不同波长(信道)的光，因而具有明显的带宽优势。主要用于要求传输距离较长、布线条件特殊的主干网连接。

### 传输距离
除了从改善传输介质入手，还需要考虑传输距离的影响，通过缩短两点传输距离，可以减少传输时间，常见的缩短路程的方案：

* **CDN：** CDN是构建在网络之上的内容分发网络，依靠部署在各地的边缘服务器，通过中心平台的负载均衡、内容分发、调度等功能模块，使用户就近获取所需内容，降低网络拥塞，提高用户访问响应速度和命中率。
* **架设更短路线：** 如海底光缆，尽量缩短两点之间的距离。

**传输速度受到物理定力（光速限制）的限制，我们需要从协议层面去做优化，解决性能瓶颈**