# 内存管理
高级语言程序最终被编译器（解释器）转换成一条条机器指令，程序最终的执行形式是`进程`，`进程`为程序提供运行时刻环境（run-time environment)，此环境处理许多事务如：为源程序中的对象分配和安排存储位置，过程连接，参数传递，与操作系统、输入输出设备等的接口。

程序在执行前，操作系统需要为该进程分配内存空间，典型的运行时刻内存划分如下：

![http://7xsi10.com1.z0.glb.clouddn.com/mem1.png](http://7xsi10.com1.z0.glb.clouddn.com/mem1.png)

## 操作系统层面
操作系统分配内存的方式有多种，如连续分配、分页存储、分段存储等。以分页存储为例，内存中存放每一个进程的页表来记录逻辑页号与实际物理磁盘块对应关系，而在页表寄存器中记录每个进程页表始址与页号和页表长度，平时，进程未 执行时，页表的始址和页表长度存放在本进程的 PCB 中。当调度程序调度到某进程时，才 将这两个数据装入页表寄存器中。CPU给出逻辑地址通过分页地址变换找到真实物理块。如图：

![http://7xsi10.com1.z0.glb.clouddn.com/mem3.png](http://7xsi10.com1.z0.glb.clouddn.com/mem3.png)

对于大内存应用，可以通过`虚拟存储器`解决，即加入缺页中断，换入换出机制的内存管理策略：
![http://7xsi10.com1.z0.glb.clouddn.com/mem2.png](http://7xsi10.com1.z0.glb.clouddn.com/mem2.png)

这其中还涉及到不同置换算法，详细知识请参考《操作系统》，我们在后面的离线应用章节本地存储方面也会涉及到相关知识。

## JS内存空间
// todo
## V8运行时
// todo