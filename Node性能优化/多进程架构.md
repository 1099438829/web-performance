# 多进程架构
为了实现多个程序的并发执行，操作系统引入进程的概念，进程实体是一个能独立运行、独立分配资源和独立接受调度的基本单位，连续到我们的Node程序，执行`node xxx.js`即会创建相应进程执行程序。由于JS单线程的特性，为了充分利用CPU，Node引入多进程架构，采用`Master-Worker`模式可类比浏览器的`Web Worker`。引入了多进程，就可以类比于操作系统关于多进程的管理策略。

## 操作系统层面
操作系统对进程管理涉及多个方面：进程创建、调度、进程阻塞和唤醒、进程挂起与激活、进程终止、进程间同步、进程间通信等方面。我们这里不会对每一个方面进行细讲。
### 进程创建

* 申请空白PCB(进程控制块)
* 为新进程分配资源
* 初始化PCB
* 将新进程加入就绪队列

### 进程状态
进程是动态的，具有其生命周期，进程的不同状态如图：
![http://7xsi10.com1.z0.glb.clouddn.com/process1.png](http://7xsi10.com1.z0.glb.clouddn.com/process1.png)

### 进程终止
进程终止原因：

* 正常结束
* 异常结束（如越界、IO故障等）
* 外界干预(如程序员或用户手动终止、父进程请求子进程结束、父进程结束导致的子进程结束)

### 进程间通信
这个话题将是这篇文章的重点。进程间通信(IPC)有多种方式:

* 信号
* 信号量（一般用于进程间同步）
* 管道通信（包括命名管道和无名管道）
* 消息队列
* 共享内存
* 套接字（如Unix domain Socket)

## Node多进程

// todo